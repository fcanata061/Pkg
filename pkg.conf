# ================================================
# Configuração global do gerenciador de pacotes
# ================================================

# Diretórios principais
ROOT_DIR="/"                         # raiz onde os pacotes são instalados
DB_DIR="/var/db/pkg"                 # base de dados (meta) dos pacotes instalados
SRC_DIR="/var/db/pkg/sources"        # fontes baixados
BUILD_DIR="/tmp/build"               # diretórios de build temporário
PKG_DIR="/var/tmp/fakeroot"          # diretórios fakeroot (destdir)
LOG_DIR="/var/log/pkg"               # logs de build/instalação
SQLITE_DB="$DB_DIR/pkg.db"           # banco SQLite

# Diretórios do repositório Git
REPO_DIR="/var/db/pkg/repo"
REPOS=("core" "extra" "x11" "desktop")

# Url do repositório git.
REPO_GIT_URL="https://github.com/seuusuario/seurepo-pkg.git"

# Scripts auxiliares (no mesmo diretório por padrão)
SCRIPT1="./script1.sh"
SCRIPT2="./script2.sh"

# Prefixo padrão de instalação
PREFIX="/usr"

# Flags de compilação
export CFLAGS="-O2 -pipe -march=native"
export CXXFLAGS="$CFLAGS"
export LDFLAGS="-Wl,-O1,--as-needed"
export PKG_CONFIG_PATH="/usr/lib/pkgconfig:/usr/share/pkgconfig"

# Quantos jobs paralelos usar no make
export MAKEFLAGS="-j$(nproc)"

# Paralelismo de operações do gerenciador (downloads/builds independentes)
PKG_JOBS="$(nproc)"   # ajuste para limitar paralelismo de fetch; build respeita deps

# Variáveis padrão para instalação em fakeroot
export PKG="$PKG_DIR"              # usado dentro dos build.txt
export DESTDIR="$PKG"              # compatibilidade com autotools

# Variável de path do prefixo
export PATH="$PREFIX/bin:$PATH"

# Preferência de download
DOWNLOADER=""
if command -v wget >/dev/null 2>&1; then
    DOWNLOADER="wget -c --show-progress --progress=bar:force:noscroll"
elif command -v curl >/dev/null 2>&1; then
    DOWNLOADER="curl -L -O --progress-bar"
fi
export DOWNLOADER

# Ajustes de locale para builds reprodutíveis
export LC_ALL=C

# Criar diretórios caso não existam
mkdir -p "$DB_DIR" "$SRC_DIR" "$BUILD_DIR" "$PKG_DIR" "$LOG_DIR"

# (Opcional) URL do repositório Git para 'pkg sync'
# export REPO_GIT_URL="https://seu.repo.git"

# Cores ANSI e ícones
RED="\033[1;31m";     GREEN="\033[1;32m";  YELLOW="\033[1;33m"; BLUE="\033[1;34m"
MAGENTA="\033[1;35m"; CYAN="\033[1;36m";   GRAY="\033[0;37m";   RESET="\033[0m"
BOLD="\033[1m";       DIM="\033[2m"

ICON_OK="✔"; ICON_FAIL="✘"; ICON_WARN="⚠"; ICON_INFO="ℹ"

# Checksums (SHA256) — habilitar/desabilitar
CHECKSUMS="on"   # valores: on|off

# Hooks globais (opcional): diretório com scripts executáveis
GLOBAL_HOOKS_DIR="$REPO_DIR/hooks"
